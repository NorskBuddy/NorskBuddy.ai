<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Norsk Buddy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg, #1cb0f6, #58cc02);
}

.app {
  max-width: 480px;
  margin: auto;
  background: #fff;
  min-height: 100vh;
  padding: 20px;
  position: relative;
}

h1, h2 {
  text-align: center;
}

.hidden { display: none; }

button {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  background: #58cc02;
  color: white;
  cursor: pointer;
}

button.secondary { background: #1cb0f6; }

.mascot {
  width: 110px;
  display: block;
  margin: 10px auto;
}

.lesson-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
  margin-top: 20px;
}

.lesson {
  background: #f0f8ff;
  border-radius: 16px;
  padding: 16px;
  text-align: center;
  cursor: pointer;
}

.lesson img {
  width: 60px;
}

.preview {
  margin-top: 15px;
  border-radius: 14px;
  overflow: hidden;
}

.preview img {
  width: 100%;
}

#prev {
  position: absolute;
  top: 12px;
  left: 12px;
  width: auto;
  padding: 8px 14px;
}
</style>
</head>

<body>
<div class="app">

<h1>üá≥üá¥ Norsk Buddy</h1>
<img class="mascot" src="assets/mascots/mascot-man.png">

<!-- GOAL SELECTION -->
<div id="screen-goals" class="hidden">
  <h2>What are your ambitions for learning Norsk?</h2>
  <button onclick="setGoal()">Visiting Norway</button>
  <button onclick="setGoal()">Curious about the language</button>
  <button onclick="setGoal()">Conversational fluency</button>
  <button onclick="setGoal()">Business fluency</button>
</div>

<!-- HOME -->
<div id="screen-home" class="hidden">
  <h2>Your Journey</h2>

  <div class="lesson-grid">
    <div class="lesson" onclick="openLesson(1)">
      ‚õ∞Ô∏è<br>Greetings
    </div>
    <div class="lesson" onclick="openLesson(2)">
      ‚õ∞Ô∏è<br>Courtesy
    </div>
    <div class="lesson" onclick="openLesson(3)">
      ‚õ∞Ô∏è<br>Needs
    </div>
    <div class="lesson" onclick="openLesson(4)">
      ‚õ∞Ô∏è<br>Numbers
    </div>
    <div class="lesson" onclick="openLesson('slang')">
      ‚õ∞Ô∏è<br>Slang
    </div>
  </div>

  <div class="preview">
    <img id="lesson-preview" src="">
  </div>
</div>

<!-- LESSON -->
<div id="screen-lesson" class="hidden">
  <button id="prev" onclick="goHome()">‚Üê Home</button>

  <h2 id="word-no"></h2>
  <p><strong>English:</strong> <span id="word-en"></span></p>

  <button class="secondary" onclick="playAudio()">üîä Play</button>
  <button onclick="nextWord()">Next</button>
</div>

</div>

<script>
const lessons = {
  1: [
    {en:'Hello',no:'Hallo',audio:'Norsk-Buddy-Audio/Hallo.mp3'},
    {en:'Goodbye',no:'Ha det',audio:'Norsk-Buddy-Audio/Ha_det.mp3'}
  ],
  2: [
    {en:'Please',no:'V√¶r s√• snill'},
    {en:'Thank you',no:'Takk'}
  ],
  3: [
    {en:'Water',no:'Vann'},
    {en:'Food',no:'Mat'}
  ],
  4: [
    {en:'One',no:'En'},
    {en:'Two',no:'To'}
  ],
  slang: [
    {en:'What‚Äôs up?',no:'Hva skjer?'},
    {en:'Cool',no:'Kult'}
  ]
};

const images = [
  'assets/images/norway1.jpg',
  'assets/images/norway2.jpg',
  'assets/images/norway3.jpg',
  'assets/images/norway4.jpg',
  'assets/images/norway5.jpg'
];

let currentLesson, index = 0;

function setGoal() {
  localStorage.setItem('goalSelected', 'true');
  show('screen-home');
}

function show(id) {
  document.querySelectorAll('[id^=screen]').forEach(s => s.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

function openLesson(id) {
  currentLesson = lessons[id];
  index = 0;
  document.getElementById('lesson-preview').src =
    images[Math.floor(Math.random()*images.length)];
  show('screen-lesson');
  showWord();
}

function showWord() {
  const w = currentLesson[index];
  document.getElementById('word-no').textContent = w.no;
  document.getElementById('word-en').textContent = w.en;
}

function nextWord() {
  if (index < currentLesson.length - 1) {
    index++;
    showWord();
  } else {
    alert('Lesson complete!');
    show('screen-home');
  }
}

function playAudio() {
  const w = currentLesson[index];
  if (!w.audio) return;
  new Audio(w.audio).play();
}

function goHome() {
  show('screen-home');
}

if (localStorage.getItem('goalSelected')) {
  show('screen-home');
} else {
  show('screen-goals');
}
</script>

  <script>
/* =========================
   NEW LESONS (APPEND ONLY)
   ========================= */

const newLessons = {

  "who-what-why-where": {
    title: "Who, What, Why, and Where",
    words: [
      { no: "hvem", en: "who" },
      { no: "hva", en: "what" },
      { no: "hvor", en: "where" },
      { no: "hvorfor", en: "why" },
      { no: "n√•r", en: "when" },
      { no: "gikk", en: "went" },
      { no: "g√•r", en: "is going" },
      { no: "vil g√•", en: "will go" },
      { no: "har g√•tt", en: "has went" },
      { no: "hvem er", en: "who is" },
      { no: "hvem var", en: "who was" },
      { no: "hvem vil", en: "who will" },
      { no: "hva er", en: "what is / are" },
      { no: "hva har", en: "what has / have" },
      { no: "hva vil", en: "what will" },
      { no: "hvor er", en: "where is / are" },
      { no: "hvor har", en: "where has" },
      { no: "hvor vil", en: "where will" },
      { no: "n√•r har", en: "when has" },
      { no: "n√•r vil", en: "when will" },
      { no: "n√•r er", en: "when is" },
      { no: "hvorfor er det", en: "why is it" },
      { no: "hvorfor har", en: "why has" },
      { no: "hvorfor vil", en: "why will" }
    ]
  },

  "colors": {
    title: "Colors",
    words: [
      { no: "r√∏d", en: "red" },
      { no: "bl√•", en: "blue" },
      { no: "gul", en: "yellow" },
      { no: "guld", en: "gold" },
      { no: "lilla", en: "purple" },
      { no: "rosa", en: "pink" },
      { no: "gr√∏n", en: "green" },
      { no: "brun", en: "brown" },
      { no: "svart", en: "black" },
      { no: "hvit", en: "white" }
    ]
  },

  "professions": {
    title: "Professions",
    words: [
      { no: "ingeni√∏r", en: "engineer" },
      { no: "politi", en: "police" },
      { no: "politimann", en: "policeman" },
      { no: "politikvinne", en: "policewoman" },
      { no: "postbud", en: "postman" },
      { no: "kokk", en: "chef" },
      { no: "bygningsarbeider", en: "construction worker" },
      { no: "bussj√•f√∏r", en: "bus driver" },
      { no: "l√¶rer", en: "teacher" }
    ]
  },

  "feelings": {
    title: "Feelings",
    words: [
      { no: "f√∏lelse", en: "feeling" },
      { no: "f√∏lelser", en: "feelings" },
      { no: "f√∏les", en: "feels" },
      { no: "vil f√∏le", en: "will feel" },
      { no: "f√∏lte", en: "felt" },
      { no: "glad", en: "happy" },
      { no: "trist", en: "sad" },
      { no: "sint", en: "mad" },
      { no: "spennende", en: "exciting" }
    ]
  },

  "numbers": {
    title: "Numbers",
    words: [
      { no: "en", en: "one" },
      { no: "to", en: "two" },
      { no: "tre", en: "three" },
      { no: "fire", en: "four" },
      { no: "fem", en: "five" },
      { no: "seks", en: "six" },
      { no: "sju", en: "seven" },
      { no: "√•tte", en: "eight" },
      { no: "ni", en: "nine" },
      { no: "ti", en: "ten" }
    ]
  },

  "their-there-theyre": {
    title: "Their / There / They're",
    words: [
      { no: "der", en: "there" },
      { no: "deres", en: "their" },
      { no: "de er", en: "they are" }
    ]
  }

};

/* =========================
   REPEAT + SHUFFLE LOGIC
   ========================= */

function buildLessonSequence(words) {
  const base = [...words];
  const repeats = [];

  base.forEach((word, index) => {
    if (Math.random() < 0.4 && index < base.length - 2) {
      repeats.push(word);
    }
  });

  return shuffleWithoutImmediateRepeat([...base, ...repeats]);
}

function shuffleWithoutImmediateRepeat(arr) {
  let shuffled;
  do {
    shuffled = [...arr].sort(() => Math.random() - 0.5);
  } while (
    shuffled.some((item, i) => i > 0 && item.no === shuffled[i - 1].no)
  );
  return shuffled;
}

/* =========================
   MERGE INTO EXISTING APP
   ========================= */

// Assumes your app already has a `lessons` object
Object.assign(lessons, newLessons);

// Wherever your app starts a lesson, ensure it uses:
function startLesson(lessonId) {
  currentLessonId = lessonId;
  currentLessonWords = buildLessonSequence(lessons[lessonId].words);
  currentWordIndex = 0;
  correctAnswers = 0;
  showNextWord();
}
</script>


</body>
</html>
