<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Norsk Buddy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
:root {
  --bg: #0f172a;
  --panel: #1e293b;
  --accent: #38bdf8;
  --accent-soft: #0ea5e9;
  --good: #22c55e;
  --bad: #ef4444;
  --text: #e5e7eb;
  --muted: #94a3b8;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

header {
  padding: 16px;
  background: linear-gradient(135deg, #020617, #020617);
  border-bottom: 1px solid #334155;
  text-align: center;
}

header h1 {
  margin: 0;
  font-size: 1.5rem;
}

header small {
  color: var(--muted);
}

main {
  padding: 16px;
  max-width: 900px;
  margin: auto;
}

.section {
  background: var(--panel);
  border-radius: 12px;
  margin-bottom: 16px;
  overflow: hidden;
}

.section-header {
  padding: 14px 16px;
  cursor: pointer;
  background: #020617;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.section-header:hover {
  background: #020617;
}

.section-header h2 {
  margin: 0;
  font-size: 1.1rem;
}

.section-content {
  display: none;
  padding: 16px;
}

.lesson {
  padding: 12px;
  border-radius: 10px;
  background: #020617;
  margin-bottom: 10px;
  cursor: pointer;
}

.lesson:hover {
  outline: 2px solid var(--accent-soft);
}

.lesson-title {
  font-weight: bold;
}

.lesson-sub {
  color: var(--muted);
  font-size: 0.9rem;
}

button {
  background: var(--accent);
  border: none;
  border-radius: 999px;
  padding: 10px 16px;
  color: black;
  font-weight: bold;
  cursor: pointer;
}

button.secondary {
  background: #020617;
  color: var(--text);
  border: 1px solid #334155;
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.lesson-view {
  position: fixed;
  inset: 0;
  background: #020617;
  z-index: 100;
  display: none;
  flex-direction: column;
}

.lesson-top {
  padding: 16px;
  border-bottom: 1px solid #334155;
}

.lesson-body {
  padding: 16px;
  flex: 1;
  overflow-y: auto;
}

.word-card {
  background: #020617;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}

.word-card h3 {
  margin: 0 0 6px 0;
}

.word-card small {
  color: var(--muted);
}

.sentence {
  margin: 12px 0;
  font-size: 1.1rem;
}

.sentence span {
  cursor: pointer;
  border-bottom: 1px dotted var(--accent-soft);
}

.translation-line {
  min-height: 44px;
  padding: 10px;
  border-radius: 8px;
  background: #020617;
  margin-bottom: 10px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.word-bubble {
  padding: 8px 12px;
  background: #020617;
  border-radius: 999px;
  cursor: pointer;
  border: 1px solid #334155;
}

.word-bubble.good {
  background: var(--good);
  color: black;
}

.word-bubble.bad {
  background: var(--bad);
  color: white;
}

.word-bank {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.feedback {
  margin-top: 10px;
  min-height: 20px;
  font-size: 0.9rem;
}

.feedback.good { color: var(--good); }
.feedback.bad { color: var(--bad); }

.practice-panel {
  margin-top: 20px;
  padding: 16px;
  border-radius: 12px;
  background: #020617;
}

input[type="text"] {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #334155;
  background: #020617;
  color: var(--text);
  margin-bottom: 10px;
}

.mascot {
  position: fixed;
  bottom: 16px;
  right: 16px;
  width: 90px;
  opacity: 0.9;
}
</style>
</head>

<body>

<header>
  <h1>Norsk Buddy üá≥üá¥</h1>
  <small>Learn Norwegian the smart (and fun) way</small>
</header>

<main id="app"></main>

<img class="mascot" src="mascot.png" alt="Mascot"/>

<div class="lesson-view" id="lessonView">
  <div class="lesson-top">
    <button class="secondary" onclick="closeLesson()">‚Üê Back</button>
    <h2 id="lessonTitle"></h2>
  </div>
  <div class="lesson-body" id="lessonBody"></div>
</div>

<script>
/* ======================================================
   CORE STATE
====================================================== */
let currentLesson = null;
let xp = 0;
let streak = 0;

/* ======================================================
   UTILITIES
====================================================== */
function toggleSection(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === "none" ? "block" : "none";
}

function closeLesson() {
  document.getElementById("lessonView").style.display = "none";
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}
</script>

<script>
/* ======================================================
   DICTIONARY
====================================================== */
const DICT = {
  "jeg":"I","du":"you","meg":"me","hans":"his","hennes":"hers",
  "sko":"shoes","r√∏d":"red","bl√•":"blue","gi":"give","ta":"take",
  "bok":"book","telefon":"phone","mistet":"lost","finner":"finds",
  "glad":"happy","trist":"sad","en":"one","to":"two","tre":"three",
  "der":"there","deres":"their","de er":"they are"
};

/* ======================================================
   LESSON DATA
====================================================== */
const SECTIONS = [
{
  title:"Section 1 ‚Äì The Basics",
  lessons:[
    {
      title:"Me, Myself, and I",
      words:[
        {no:"jeg",en:"I",ex:"Jeg er her",note:"Used when talking about yourself"},
        {no:"meg",en:"me",ex:"Se p√• meg",note:"Object form of I"},
        {no:"du",en:"you",ex:"Du er snill",note:"Informal you"},
        {no:"hans",en:"his",ex:"Det er hans bok",note:"Ownership"},
        {no:"hennes",en:"hers",ex:"Den er hennes",note:"Ownership"}
      ],
      sentence:{no:"Du og meg",en:"You and me"}
    },
    {
      title:"Colors Everywhere",
      words:[
        {no:"r√∏d",en:"red",ex:"Bilen er r√∏d",note:"Color"},
        {no:"bl√•",en:"blue",ex:"Himmelen er bl√•",note:"Color"},
        {no:"svart",en:"black",ex:"Katten er svart",note:"Color"},
        {no:"hvit",en:"white",ex:"Sn√∏en er hvit",note:"Color"},
        {no:"gr√∏nn",en:"green",ex:"Gresset er gr√∏nt",note:"Color"}
      ],
      sentence:{no:"Hatten er r√∏d",en:"The hat is red"}
    }
  ]
}
];

/* ======================================================
   APP RENDER
====================================================== */
const app = document.getElementById("app");

SECTIONS.forEach((sec,i)=>{
  const s = document.createElement("div");
  s.className="section";
  s.innerHTML=`
    <div class="section-header" onclick="toggleSection('sec${i}')">
      <h2>${sec.title}</h2>
      <span>‚ñº</span>
    </div>
    <div class="section-content" id="sec${i}" style="display:none"></div>`;
  app.appendChild(s);

  const sc = s.querySelector(".section-content");
  sec.lessons.forEach(l=>{
    const el = document.createElement("div");
    el.className="lesson";
    el.innerHTML=`
      <div class="lesson-title">${l.title}</div>
      <div class="lesson-sub">${l.words.length} words</div>`;
    el.onclick=()=>openLesson(l);
    sc.appendChild(el);
  });
});

/* ======================================================
   LESSON VIEW
====================================================== */
function openLesson(lesson){
  currentLesson = lesson;
  document.getElementById("lessonView").style.display="flex";
  document.getElementById("lessonTitle").innerText = lesson.title;
  const body = document.getElementById("lessonBody");
  body.innerHTML="";

  lesson.words.forEach(w=>{
    const c=document.createElement("div");
    c.className="word-card";
    c.innerHTML=`
      <h3>${w.no} ‚Äì ${w.en}</h3>
      <small>${w.note}</small>
      <div class="sentence">${makeClickable(w.ex)}</div>`;
    body.appendChild(c);
  });

  renderSentenceExercise(body, lesson.sentence);
}

/* ======================================================
   SENTENCE BUILDER
====================================================== */
function renderSentenceExercise(container, sentence){
  const words = sentence.en.split(" ");
  const bank = shuffle([...words,"the","and","is","a"]);

  const line = document.createElement("div");
  line.className="translation-line";

  const wb = document.createElement("div");
  wb.className="word-bank";

  let answer=[];

  bank.forEach(w=>{
    const b=document.createElement("div");
    b.className="word-bubble";
    b.innerText=w;
    b.onclick=()=>{
      answer.push(w);
      line.innerHTML=answer.join(" ");
      if(answer.join(" ")===sentence.en){
        b.classList.add("good");
      } else if(answer.length>=words.length){
        b.classList.add("bad");
        answer=[];
        line.innerHTML="";
      }
    };
    wb.appendChild(b);
  });

  container.innerHTML+=`
    <h3>Translate:</h3>
    <div class="sentence">${makeClickable(sentence.no)}</div>`;
  container.appendChild(line);
  container.appendChild(wb);
}

/* ======================================================
   CLICKABLE WORDS
====================================================== */
function makeClickable(text){
  return text.split(" ").map(w=>{
    const clean=w.toLowerCase();
    if(DICT[clean]){
      return `<span onclick="alert('${clean}: ${DICT[clean]}')">${w}</span>`;
    }
    return w;
  }).join(" ");
}
</script>

</body>
</html>

