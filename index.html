<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Norsk Buddy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:system-ui,sans-serif;background:linear-gradient(135deg,#1cb0f6,#58cc02);}
.app{max-width:480px;margin:auto;background:#fff;min-height:100vh;padding:20px;}
h1,h2{text-align:center;}
.hidden{display:none;}
button{width:100%;padding:12px;margin:8px 0;font-size:16px;border:none;border-radius:12px;background:#58cc02;color:white;cursor:pointer;}
button.secondary{background:#1cb0f6;}
.lesson-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-top:20px;}
.lesson{background:#f0f8ff;border-radius:16px;padding:16px;text-align:center;cursor:pointer;}
.option{background:#eee;color:#333;margin:6px;padding:10px;border-radius:8px;cursor:pointer;}
.option.correct{background:#58cc02;color:white;}
.option.wrong{background:#e74c3c;color:white;}
input{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #ccc;}
.score{text-align:center;font-weight:bold;margin:10px 0;}
</style>
</head>

<body>
<div class="app">
<h1>üá≥üá¥ Norsk Buddy</h1>

<!-- HOME -->
<div id="screen-home">
  <h2>Your Journey</h2>
  <div class="lesson-grid" id="lessonGrid"></div>

  <h2 style="margin-top:30px;">Practice</h2>
  <button class="secondary" onclick="startWordPractice()">Word Practice</button>
  <button class="secondary" onclick="showCustomPractice()">Custom Practice</button>
</div>

<!-- LESSON -->
<div id="screen-lesson" class="hidden">
  <button onclick="goHome()">‚Üê Home</button>
  <h2 id="word-no"></h2>
  <p><strong>English:</strong> <span id="word-en"></span></p>
  <button onclick="nextWord()">Next</button>
</div>

<!-- MATCH -->
<div id="screen-match" class="hidden">
  <button onclick="goHome()">‚Üê Home</button>
  <h2>Match the words</h2>
  <div class="score" id="scoreBox"></div>
  <div id="matchBox"></div>
</div>

<!-- CUSTOM PRACTICE -->
<div id="screen-custom" class="hidden">
  <button onclick="goHome()">‚Üê Home</button>
  <h2>Enter up to 10 English words</h2>
  <div id="customInputs"></div>
  <button onclick="startCustomPractice()">Start Practice</button>
</div>

<script>
/* ================= LESSON DATA ================= */
const lessons={
homeSweetHome:{title:'Home Sweet Home',words:[
['hus','house'],['rom','room'],['d√∏r','door'],['vindu','window'],['bord','table'],['stol','chair'],['seng','bed'],['kj√∏kken','kitchen']
]},
foodMood:{title:'Food Mood',words:[
['mat','food'],['br√∏d','bread'],['vann','water'],['ost','cheese'],['fisk','fish'],['eple','apple']
]},
outAndAbout:{title:'Out & About',words:[
['g√•','walk'],['reise','travel'],['butikk','store'],['vei','road'],['by','city']
]},
weatherOrNot:{title:'Weather or Not',words:[
['sol','sun'],['regn','rain'],['sn√∏','snow'],['vind','wind'],['kald','cold'],['varm','warm']
]},
timeAfterTime:{title:'Time After Time',words:[
['n√•','now'],['i dag','today'],['i morgen','tomorrow'],['ofte','often'],['aldri','never']
]},
talkTheTalk:{title:'Talk the Talk',words:[
['snakke','talk'],['si','say'],['sp√∏rre','ask'],['svare','answer'],['forst√•','understand']
]}
};

/* ================= BUILD JOURNEY ================= */
const grid=document.getElementById('lessonGrid');
Object.keys(lessons).forEach(key=>{
const tile=document.createElement('div');
tile.className='lesson';
tile.textContent=lessons[key].title;
tile.onclick=()=>startLesson(key);
grid.appendChild(tile);
});

/* ================= STATE ================= */
let sequence=[],index=0,score=0;

/* ================= NAV ================= */
function show(id){
document.querySelectorAll('[id^=screen]').forEach(s=>s.classList.add('hidden'));
document.getElementById(id).classList.remove('hidden');
}
function goHome(){show('screen-home');}

/* ================= LESSON FLOW ================= */
function startLesson(key){
sequence=[...lessons[key].words];
index=0;
show('screen-lesson');
showWord();
}
function showWord(){
document.getElementById('word-no').textContent=sequence[index][0];
document.getElementById('word-en').textContent=sequence[index][1];
}
function nextWord(){
index<sequence.length-1?showWord(++index):startMatch(sequence);
}

/* ================= MATCH ================= */
function startMatch(words){
score=0;
show('screen-match');
document.getElementById('scoreBox').textContent='Score: 0';
buildMatch(words);
}
function buildMatch(words){
const box=document.getElementById('matchBox');
box.innerHTML='';
const shuffled=[...words].sort(()=>Math.random()-0.5);
shuffled.forEach(w=>{
const b=document.createElement('button');
b.className='option';
b.textContent=w[1];
b.onclick=()=>{
b.classList.add('correct');
score++;
document.getElementById('scoreBox').textContent='Score: '+score;
};
box.appendChild(b);
});
}

/* ================= WORD PRACTICE ================= */
function startWordPractice(){
let all=[];
Object.values(lessons).forEach(l=>all.push(...l.words));
startMatch(all.sort(()=>Math.random()-0.5).slice(0,6));
}

/* ================= CUSTOM PRACTICE ================= */
function showCustomPractice(){
show('screen-custom');
const box=document.getElementById('customInputs');
box.innerHTML='';
for(let i=0;i<10;i++){
const input=document.createElement('input');
input.placeholder='English word (e.g. water)';
box.appendChild(input);
}
}

function startCustomPractice(){
let all=[];
Object.values(lessons).forEach(l=>all.push(...l.words));
const lookup=new Map(all.map(w=>[w[1].toLowerCase(),w]));

const inputs=[...document.querySelectorAll('#customInputs input')];
let selected=[];
inputs.forEach(i=>{
const v=i.value.trim().toLowerCase();
if(v && lookup.has(v) && !selected.includes(lookup.get(v))){
selected.push(lookup.get(v));
}
});

if(selected.length===0){
alert('No valid words found in lessons.');
return;
}

startMatch(selected);
}
</script>
</body>
</html>


